{
  "strategies": {
    "oracle_full_pipeline": {
      "name": "Oracle Full Pipeline",
      "description": "Complete 7-step Oracle query pipeline with discovery and LLM generation",
      "when_to_use": {
        "complexity": "complex",
        "needs_discovery": true,
        "natural_language": true
      },
      "steps": [
        {
          "step": 1,
          "name": "Analyze Query",
          "tool": "deep_analyze_query",
          "description": "Extract intent and entities from natural language",
          "pass_to_next": ["analysis"]
        },
        {
          "step": 2,
          "name": "Match Schema",
          "tool": "smart_schema_match",
          "description": "Find relevant tables and columns",
          "use_from_previous": ["analysis.entities"],
          "pass_to_next": ["schema_matches"]
        },
        {
          "step": 3,
          "name": "Discover Data",
          "tool": "discover_sample_data",
          "description": "Get sample data for context",
          "use_from_previous": ["schema_matches.tables"],
          "optional": true,
          "critical": false,
          "pass_to_next": ["sample_data"]
        },
        {
          "step": 4,
          "name": "Generate SQL",
          "tool": "generate_sql",
          "description": "Create SQL using LLM with schema context",
          "use_from_previous": ["original_query", "schema_matches", "sample_data"],
          "pass_to_next": ["generated_sql"]
        },
        {
          "step": 5,
          "name": "Optimize SQL",
          "tool": "optimize_sql_smart",
          "description": "Optimize the generated query",
          "use_from_previous": ["generated_sql->sql"],
          "optional": true,
          "pass_to_next": ["optimized_sql"]
        },
        {
          "step": 6,
          "name": "Execute Query",
          "tool": "execute_query",
          "description": "Run the SQL query",
          "use_from_previous": ["optimized_sql->sql", "generated_sql->sql"],
          "pass_to_next": ["results"]
        },
        {
          "step": 7,
          "name": "Format Results",
          "tool": "format_results",
          "description": "Convert to natural language response",
          "use_from_previous": ["original_query", "results", "generated_sql"],
          "final": true
        }
      ],
      "timeout_ms": 30000,
      "halt_on_critical_error": true,
      "allow_partial_success": false
    },
    
    "oracle_simple_query": {
      "name": "Oracle Simple Query",
      "description": "Direct SQL execution for simple or pre-written queries",
      "when_to_use": {
        "complexity": "simple",
        "has_sql": true
      },
      "steps": [
        {
          "step": 1,
          "name": "Validate SQL",
          "tool": "validate_sql",
          "description": "Check SQL syntax",
          "optional": true,
          "pass_to_next": ["validation"]
        },
        {
          "step": 2,
          "name": "Execute Query",
          "tool": "execute_query",
          "description": "Run the SQL query",
          "pass_to_next": ["results"]
        },
        {
          "step": 3,
          "name": "Format Results",
          "tool": "format_results",
          "description": "Convert to user-friendly format",
          "use_from_previous": ["original_query", "results"],
          "final": true
        }
      ],
      "timeout_ms": 10000
    },
    
    "oracle_discovery": {
      "name": "Oracle Discovery",
      "description": "Explore database schema and data",
      "when_to_use": {
        "intent": "explore",
        "discovery_needed": true
      },
      "steps": [
        {
          "step": 1,
          "name": "List Tables",
          "tool": "list_tables",
          "description": "Get all available tables",
          "pass_to_next": ["tables"]
        },
        {
          "step": 2,
          "name": "Discover Enums",
          "tool": "discover_enums",
          "description": "Find enumeration mappings",
          "parallel": true,
          "pass_to_next": ["enums"]
        },
        {
          "step": 3,
          "name": "Sample Data",
          "tool": "discover_sample_data",
          "description": "Get sample data from key tables",
          "use_from_previous": ["tables"],
          "limit_tables": 5,
          "final": true
        }
      ],
      "timeout_ms": 15000
    },
    
    "multi_tool_sequential": {
      "name": "Sequential Tool Execution",
      "description": "Execute multiple tools in sequence with data passing",
      "when_to_use": {
        "strategy": "MULTIPLE_TOOLS"
      },
      "steps": "dynamic",
      "timeout_ms": 20000
    },
    
    "oracle_adaptive_pipeline": {
      "name": "Oracle Adaptive Intelligence Pipeline",
      "description": "Intelligently adapts to query complexity using smart analysis",
      "when_to_use": {
        "complexity": "adaptive",
        "needs_intelligence": true
      },
      "steps": [
        {
          "step": 1,
          "name": "Deep Query Analysis",
          "tool": "deep_analyze_query",
          "description": "Extract ALL semantic concepts",
          "pass_to_next": ["deep_analysis"]
        },
        {
          "step": 2,
          "name": "Smart Schema Match",
          "tool": "smart_schema_match",
          "description": "Intelligent schema matching with all tools",
          "use_from_previous": ["original_query"],
          "pass_to_next": ["smart_matches"]
        },
        {
          "step": 3,
          "name": "Generate SQL",
          "tool": "generate_sql",
          "description": "Create SQL using intelligent context",
          "use_from_previous": ["original_query", "smart_matches"],
          "pass_to_next": ["generated_sql"]
        },
        {
          "step": 4,
          "name": "Smart Optimize",
          "tool": "optimize_sql_smart",
          "description": "Optimize with complexity checking",
          "use_from_previous": ["generated_sql"],
          "pass_to_next": ["optimized_sql"]
        },
        {
          "step": 5,
          "name": "Execute Query",
          "tool": "execute_query",
          "description": "Run the optimized query",
          "use_from_previous": ["optimized_sql->sql"],
          "pass_to_next": ["results"]
        },
        {
          "step": 6,
          "name": "Format Results",
          "tool": "format_results",
          "description": "Convert to natural language",
          "use_from_previous": ["original_query", "results"],
          "final": true
        }
      ],
      "timeout_ms": 35000,
      "allow_partial_success": true
    },
    
    "oracle_discovery_first": {
      "name": "Oracle Discovery-First Strategy",
      "description": "Prioritizes understanding data before query generation",
      "when_to_use": {
        "intent": "explore",
        "unfamiliar_data": true
      },
      "steps": [
        {
          "step": 1,
          "name": "Deep Analyze",
          "tool": "deep_analyze_query",
          "description": "Understand query intent deeply",
          "pass_to_next": ["analysis"]
        },
        {
          "step": 2,
          "name": "List Tables",
          "tool": "list_tables",
          "description": "Get available tables",
          "pass_to_next": ["tables"]
        },
        {
          "step": 3,
          "name": "Discover Semantics",
          "tool": "discover_column_semantics",
          "description": "Understand column meanings",
          "use_from_previous": ["tables", "analysis"],
          "parallel": true,
          "pass_to_next": ["semantics"]
        },
        {
          "step": 4,
          "name": "Infer Relationships",
          "tool": "infer_relationships",
          "description": "Find table connections",
          "use_from_previous": ["tables", "analysis"],
          "parallel": true,
          "pass_to_next": ["relationships"]
        },
        {
          "step": 5,
          "name": "Smart Schema Match",
          "tool": "smart_schema_match",
          "description": "Match with full context",
          "use_from_previous": ["original_query"],
          "pass_to_next": ["matches"]
        },
        {
          "step": 6,
          "name": "Generate and Execute",
          "tool": "generate_sql",
          "description": "Create SQL with rich context",
          "use_from_previous": ["original_query", "matches", "semantics", "relationships"],
          "pass_to_next": ["sql"]
        },
        {
          "step": 7,
          "name": "Execute Query",
          "tool": "execute_query",
          "description": "Run the query",
          "use_from_previous": ["sql->sql"],
          "final": true
        }
      ],
      "timeout_ms": 40000
    },
    
    "oracle_performance_focused": {
      "name": "Oracle Performance-Optimized Pipeline",
      "description": "Focuses on query performance with smart optimization",
      "when_to_use": {
        "performance_critical": true,
        "large_dataset": true
      },
      "steps": [
        {
          "step": 1,
          "name": "Quick Analysis",
          "tool": "analyze_query",
          "description": "Fast query analysis",
          "pass_to_next": ["analysis"]
        },
        {
          "step": 2,
          "name": "Schema Match",
          "tool": "match_schema",
          "description": "Quick schema matching",
          "use_from_previous": ["analysis.entities"],
          "pass_to_next": ["matches"]
        },
        {
          "step": 3,
          "name": "Generate SQL",
          "tool": "generate_sql",
          "description": "Create initial SQL",
          "use_from_previous": ["original_query", "matches"],
          "pass_to_next": ["sql"]
        },
        {
          "step": 4,
          "name": "Smart Optimize",
          "tool": "optimize_sql_smart",
          "description": "Aggressive optimization",
          "use_from_previous": ["sql->sql"],
          "config": {"complexity_threshold": 0.1},
          "pass_to_next": ["optimized"]
        },
        {
          "step": 5,
          "name": "Explain Plan",
          "tool": "explain_plan",
          "description": "Verify performance",
          "use_from_previous": ["optimized->sql"],
          "parallel": true,
          "optional": true,
          "pass_to_next": ["plan"]
        },
        {
          "step": 6,
          "name": "Execute",
          "tool": "execute_query",
          "description": "Run optimized query",
          "use_from_previous": ["optimized->sql"],
          "config": {"limit": 1000},
          "final": true
        }
      ],
      "timeout_ms": 25000
    },
    
    "oracle_validated_pipeline": {
      "name": "Oracle Schema-Validated Pipeline",
      "description": "Ensures generated SQL is validated against actual schema before execution",
      "when_to_use": {
        "schema_validation": true,
        "high_accuracy": true
      },
      "steps": [
        {
          "step": 1,
          "name": "Deep Analysis",
          "tool": "deep_analyze_query",
          "description": "Extract all semantic concepts",
          "pass_to_next": ["analysis"]
        },
        {
          "step": 2,
          "name": "Schema Match",
          "tool": "smart_schema_match",
          "description": "Smart schema matching",
          "use_from_previous": ["original_query"],
          "pass_to_next": ["schema_matches"]
        },
        {
          "step": 3,
          "name": "Discover Data",
          "tool": "discover_sample_data",
          "description": "Get sample data for context",
          "use_from_previous": ["schema_matches.tableMatches"],
          "optional": true,
          "pass_to_next": ["sample_data"]
        },
        {
          "step": 4,
          "name": "Generate SQL",
          "tool": "generate_sql",
          "description": "Create SQL with full context",
          "use_from_previous": ["original_query", "schema_matches", "sample_data"],
          "pass_to_next": ["generated_sql"]
        },
        {
          "step": 5,
          "name": "Validate Schema",
          "tool": "validate_schema_sql",
          "description": "Validate SQL against actual schema",
          "use_from_previous": ["generated_sql->sql", "schema_matches"],
          "pass_to_next": ["validation"],
          "on_error": "retry_with_corrections"
        },
        {
          "step": 6,
          "name": "Regenerate if Invalid",
          "tool": "generate_sql",
          "description": "Regenerate SQL with corrections",
          "condition": "validation.valid == false",
          "use_from_previous": ["original_query", "schema_matches", "validation.suggestedCorrections"],
          "pass_to_next": ["corrected_sql"]
        },
        {
          "step": 7,
          "name": "Execute Query",
          "tool": "execute_query",
          "description": "Run validated SQL",
          "use_from_previous": ["corrected_sql->sql", "generated_sql->sql"],
          "pass_to_next": ["results"]
        },
        {
          "step": 8,
          "name": "Format Results",
          "tool": "format_results",
          "description": "Convert to natural language",
          "use_from_previous": ["original_query", "results"],
          "final": true
        }
      ],
      "timeout_ms": 40000,
      "retry_on_validation_failure": true,
      "max_retries": 2
    },
    
    "oracle_adaptive_retry_pipeline": {
      "name": "Oracle Adaptive Retry Pipeline",
      "description": "Validates and retries SQL with progressive constraints on each attempt",
      "when_to_use": {
        "schema_validation": true,
        "high_accuracy": true,
        "adaptive_retry": true
      },
      "steps": [
        {
          "step": 1,
          "name": "Deep Analysis",
          "tool": "deep_analyze_query",
          "description": "Extract all semantic concepts",
          "pass_to_next": ["analysis"]
        },
        {
          "step": 2,
          "name": "Schema Match",
          "tool": "smart_schema_match",
          "description": "Smart schema matching",
          "use_from_previous": ["original_query"],
          "pass_to_next": ["schema_matches"]
        },
        {
          "step": 3,
          "name": "Discover Data",
          "tool": "discover_sample_data",
          "description": "Get sample data for context",
          "use_from_previous": ["schema_matches.tableMatches"],
          "optional": true,
          "pass_to_next": ["sample_data"]
        },
        {
          "step": 4,
          "name": "Generate SQL",
          "tool": "generate_sql",
          "description": "Create SQL with full context",
          "use_from_previous": ["original_query", "schema_matches", "sample_data"],
          "pass_to_next": ["generated_sql"],
          "config": {
            "constraint_level": "standard"
          }
        },
        {
          "step": 5,
          "name": "Validate Schema",
          "tool": "validate_schema_sql",
          "description": "Validate SQL against actual schema",
          "use_from_previous": ["generated_sql->sql", "schema_matches"],
          "pass_to_next": ["validation"],
          "on_error": "continue"
        },
        {
          "step": 6,
          "name": "Regenerate with Constraints Level 1",
          "tool": "generate_sql",
          "description": "Regenerate SQL with stricter constraints",
          "condition": "validation.valid == false && retry_count == 0",
          "use_from_previous": ["original_query", "schema_matches", "validation.suggestedCorrections"],
          "pass_to_next": ["corrected_sql_1"],
          "config": {
            "constraint_level": "strict",
            "additional_constraint": "STRICT MODE: Use ONLY the exact table and column names from validation.suggestedCorrections. Do NOT assume any columns exist unless explicitly listed."
          }
        },
        {
          "step": 7,
          "name": "Revalidate Level 1",
          "tool": "validate_schema_sql",
          "description": "Validate corrected SQL",
          "condition": "corrected_sql_1 != null",
          "use_from_previous": ["corrected_sql_1->sql", "schema_matches"],
          "pass_to_next": ["validation_1"]
        },
        {
          "step": 8,
          "name": "Regenerate with Constraints Level 2",
          "tool": "generate_sql",
          "description": "Final regeneration with ultra-strict constraints",
          "condition": "validation_1.valid == false && retry_count == 1",
          "use_from_previous": ["original_query", "schema_matches", "validation_1.suggestedCorrections"],
          "pass_to_next": ["corrected_sql_2"],
          "config": {
            "constraint_level": "ultra_strict",
            "additional_constraint": "ULTRA-STRICT MODE: First LIST each table and column you will use (e.g., Tables: ORDERS, CUSTOMERS; Columns: ORDERS.ORDER_ID, CUSTOMERS.CUSTOMER_NAME). Then write the SQL using ONLY those listed items."
          }
        },
        {
          "step": 9,
          "name": "Execute Query",
          "tool": "execute_query",
          "description": "Run validated SQL",
          "use_from_previous": ["corrected_sql_2->sql", "corrected_sql_1->sql", "generated_sql->sql"],
          "pass_to_next": ["results"],
          "on_error": "analyze_and_feedback"
        },
        {
          "step": 10,
          "name": "Format Results",
          "tool": "format_results",
          "description": "Convert to natural language",
          "use_from_previous": ["original_query", "results"],
          "final": true
        }
      ],
      "timeout_ms": 50000,
      "retry_tracking": true,
      "progressive_constraints": true,
      "max_retries": 2
    }
  },
  
  "selection_rules": {
    "priority_order": [
      "oracle_simple_query",
      "oracle_validated_pipeline",
      "oracle_adaptive_pipeline",
      "oracle_discovery_first",
      "oracle_performance_focused",
      "oracle_discovery",
      "oracle_full_pipeline"
    ],
    "default_strategy": "oracle_validated_pipeline",
    "fallback_on_error": true,
    "selection_hints": {
      "complex_aggregations": "oracle_adaptive_pipeline",
      "unknown_schema": "oracle_discovery_first",
      "large_tables": "oracle_performance_focused",
      "simple_select": "oracle_simple_query"
    }
  },
  
  "configuration": {
    "enable_progress_updates": true,
    "progress_update_interval_ms": 5000,
    "enable_partial_results": true,
    "log_orchestration_decisions": true,
    "max_parallel_tools": 3
  }
}